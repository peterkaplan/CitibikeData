---
title: "GroupProject"
output: 
  html_document:
        toc: yes
        toc_float: TRUE
---
# Group Project Citi Bike Exploration and Analysis


### Setup & Data Cleaning

First, we load all of the necessary libaries.
```{r}
library("ggplot2")
library("dplyr")
library("tidyr")
library("lubridate")
library("geosphere")
library("ggmap")
```

Next, we read in the dataset we will be using. We will use the citibike data from Jan 2016 - Sept 2016. 
```{r}
citi <- read.csv("sample_data.csv")
```

Now we need to clean the data. 
Some of the data we are looking out for is:

 * Trips that last for extreme times
  
    + Subscribers have 45 minutes to bring the bike back so if the time is much longer than this the rider forgot to bring the bike back.
      Note: The cutoff time was chosen to be 1.5 Hours. This was chosen because above this it is assumed that the riders are not the usual bike rider (the users don't know how citibike works, forgot to drop off bike, extenuating circumstances) for citibike and are not the rides that we want to study. It was hard to find outliers and make the cutoff based on that because 1.5 x  IQR for tripdistance is 33 minutes which is far below the alotted time that a subscriber has to bike around which would be a valid part of the dataset. 
    + Trips that end very quickly (< 1 minute) and end at the same station that they started means the person started biking and then put it back, this is not representative of a normal citibike ride
    
  * When dealing with ages only use subscriber data, customer data has no age information. This situation needs to be handled only when using gender as a parameter.
```{r}

citi <- citi %>%
          filter(tripduration < 5400  & !(tripduration < 90 & start.station.id == end.station.id))

```


### 1. Understand the data

Lets Read in the data


##We first provide some overall descriptive statistics on the dataset
```{r}
summary(citi)

```

##We continue by visualizing the most basic, but essential, statistics of the dataset
```{r}
#Distribution of age
ggplot(citi) + geom_histogram(aes(birth.year))
#Citibike users are categorized depending into either "Customer" or "Subscriber" depending on their engagement status. A visualiztion of the distribution is shown below.
ggplot(citi) + geom_bar(aes(usertype, y = (..count..)/sum(..count..)), fill="blue", colour="darkblue", width=0.2) + ylab("Proportion") +xlab("Usertype")
#Gender distribution of users
levels(citi$gender) <- c("UNKNOWN", "MALE", "FEMALE")
ggplot(citi) + geom_bar(aes(gender, y = (..count..)/sum(..count..)), fill="blue") + ylab("Proportion") +xlab("Gender") + theme_bw()
#Distribution of duration of trips
citi$tripdurationinteger <- as.integer(citi$tripduration)
citi  <- mutate(citi, tripdurationinteger.min = tripdurationinteger/60)
x.max <- quantile(citi$tripdurationinteger.min, 0.99)
ggplot(citi) + geom_histogram(aes(tripdurationinteger)) + xlim(c(0, 5000))
```

##Further, we display statistics we found of particular interest while investigating the dataset
```{r}
#Distribution of gender displayed over birth year
citi %>% filter(gender != "0") %>% ggplot(.)  + geom_density(aes(birth.year,group=gender, fill=gender, colour=gender), adjust=3, alpha=0.1) + xlab("Year of Birth") + ylab("Density")

```

```{r}


```

```{r}


```

```{r}


```

### 2. Identify patterns in the ride history data


### 3. Visualize the data on maps


### 4. Business Issues


### 5. Impact of Weather





